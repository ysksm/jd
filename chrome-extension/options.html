<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JIRA DB Sync - Settings</title>
  <link rel="stylesheet" href="src/styles/options.css">
</head>
<body>
  <div id="app">
    <header class="header">
      <h1>JIRA DB Sync Settings</h1>
    </header>

    <main class="main">
      <!-- JIRA Connection -->
      <section class="section">
        <h2>JIRA Connection</h2>
        <div class="form-group">
          <label for="endpoint">JIRA Endpoint</label>
          <input type="url" id="endpoint" placeholder="https://your-domain.atlassian.net">
          <span class="hint">Your Atlassian Cloud or JIRA Server URL</span>
        </div>
        <div class="form-group">
          <label for="username">Username / Email</label>
          <input type="text" id="username" placeholder="user@example.com">
        </div>
        <div class="form-group">
          <label for="apiKey">API Token</label>
          <input type="password" id="apiKey" placeholder="Your API token">
          <span class="hint">
            Generate at <a href="https://id.atlassian.com/manage-profile/security/api-tokens" target="_blank">Atlassian API Tokens</a>
          </span>
        </div>
        <div class="form-actions">
          <button id="testConnectionBtn" class="btn btn-secondary">Test Connection</button>
          <button id="saveConnectionBtn" class="btn btn-primary">Save</button>
        </div>
        <div id="connectionStatus" class="status-message"></div>
      </section>

      <!-- Sync Settings -->
      <section class="section">
        <h2>Sync Settings</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="incrementalSync" checked>
            Enable incremental sync
          </label>
          <span class="hint">Only sync issues updated since the last sync</span>
        </div>
        <div class="form-group">
          <label for="marginMinutes">Safety Margin (minutes)</label>
          <input type="number" id="marginMinutes" value="5" min="0" max="60">
          <span class="hint">Overlap time to ensure no issues are missed</span>
        </div>
        <div class="form-group">
          <label for="batchSize">Batch Size</label>
          <input type="number" id="batchSize" value="100" min="10" max="1000">
          <span class="hint">Number of issues per API request</span>
        </div>
        <div class="form-actions">
          <button id="saveSyncSettingsBtn" class="btn btn-primary">Save Sync Settings</button>
        </div>
      </section>

      <!-- Projects -->
      <section class="section">
        <h2>Projects</h2>
        <p class="section-description">Select which projects to sync</p>
        <div class="form-actions">
          <button id="fetchProjectsBtn" class="btn btn-secondary">Fetch Projects from JIRA</button>
        </div>
        <div id="projectList" class="project-list">
          <div class="empty-state">
            <p>No projects loaded. Click "Fetch Projects" to load from JIRA.</p>
          </div>
        </div>
        <div id="projectsStatus" class="status-message"></div>
      </section>

      <!-- Data Management -->
      <section class="section">
        <h2>Data Management</h2>
        <div class="form-actions">
          <button id="exportDataBtn" class="btn btn-secondary">Export Database</button>
          <button id="clearDataBtn" class="btn btn-danger">Clear All Data</button>
        </div>
        <div id="dataStatus" class="status-message"></div>
      </section>
    </main>
  </div>

  <script type="module" src="dist/options.js"></script>
</body>
</html>
